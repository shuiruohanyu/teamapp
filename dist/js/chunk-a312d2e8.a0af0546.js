(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a312d2e8"],{"6c41":function(e,t,a){},b78f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{shadow:"never"}},[a("el-form",{directives:[{name:"permission",rawName:"v-permission",value:"table-list-query",expression:"'table-list-query'"}],attrs:{inline:!0,model:e.formSearch}},[a("el-form-item",{attrs:{label:"审批人"}},[a("el-input",{attrs:{placeholder:"审批人"},model:{value:e.formSearch.user,callback:function(t){e.$set(e.formSearch,"user",t)},expression:"formSearch.user"}})],1),a("el-form-item",{attrs:{label:"活动区域"}},[a("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.formSearch.region,callback:function(t){e.$set(e.formSearch,"region",t)},expression:"formSearch.region"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e.barSearch.expandInputs?a("el-form-item",{attrs:{label:"活动时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formSearch.date1,callback:function(t){e.$set(e.formSearch,"date1",t)},expression:"formSearch.date1"}})],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"选择时间"},model:{value:e.formSearch.date2,callback:function(t){e.$set(e.formSearch,"date2",t)},expression:"formSearch.date2"}})],1)],1):e._e(),e.barSearch.expandInputs?a("el-form-item",{attrs:{label:"即时配送"}},[a("el-switch",{model:{value:e.formSearch.delivery,callback:function(t){e.$set(e.formSearch,"delivery",t)},expression:"formSearch.delivery"}})],1):e._e(),e.barSearch.expandInputs?a("el-form-item",{attrs:{label:"活动状态"}},[a("el-select",{attrs:{placeholder:"活动状态"},model:{value:e.formSearch.state,callback:function(t){e.$set(e.formSearch,"state",t)},expression:"formSearch.state"}},[a("el-option",{attrs:{label:"开启",value:"1"}}),a("el-option",{attrs:{label:"关闭",value:"0"}})],1)],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{on:{click:e.handleRest}},[e._v("重置")]),a("el-button",{attrs:{type:"text"},on:{click:e.handleExpand}},[e._v(e._s(e.barSearch.expandBtnText))])],1)],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"table-list-add",expression:"'table-list-add'"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleNew}},[e._v("新建")]),""!==e.barSearch.alertText?a("el-alert",{staticClass:"alert",attrs:{title:e.barSearch.alertText,type:"info",closable:!1,"show-icon":""}}):e._e(),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.items,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"60"}}),a("el-table-column",{attrs:{prop:"author",label:"作者",width:"80"}}),a("el-table-column",{attrs:{prop:"reviewer",label:"审核",width:"80"}}),a("el-table-column",{attrs:{prop:"pageviews",label:"浏览",width:"80"}}),a("el-table-column",{attrs:{prop:"display_time",label:"日期",width:"160"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.formData,"label-width":"50px","label-position":"right"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:"作者",prop:"author"}},[a("el-input",{attrs:{placeholder:"作者"},model:{value:e.formData.author,callback:function(t){e.$set(e.formData,"author",t)},expression:"formData.author"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"类型"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[a("el-option",{attrs:{label:"CN",value:"CN"}}),a("el-option",{attrs:{label:"US",value:"US"}}),a("el-option",{attrs:{label:"JP",value:"JP"}}),a("el-option",{attrs:{label:"EU",value:"EU"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleSave(!1)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSave(!0)}}},[e._v("确 定")])],1)],1)],1)},l=[],i=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),n=a("bf56"),o=a("e350"),s={methods:{hasPermission:function(e){return Object(o["a"])(e)}},directives:{permission:{inserted:function(e,t){var a=t.value;Object(o["a"])(a)||(e.style.display="none")}}}};function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"table-list",mixins:[s],data:function(){return{formSearch:{user:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",state:""},barSearch:{expandInputs:!1,expandBtnText:"",alertText:""},items:[],pagination:{total:0,pageSize:20,pageSizes:[20,50,80,120],currentPage:1},loading:!1,multipleSelection:[],dialogVisible:!1,formData:[],rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:5,max:45,message:"长度在 5 到 45 个字符",trigger:"blur"}],author:[{required:!0,message:"请输入作者",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]}}},methods:{doQuery:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.hasPermission("table-list-query")&&(this.pagination.currentPage=t,this.pagination.pageSize=a,this.loading=!0,this.barSearch.alertText="",this.items=[],Object(n["a"])({page:t,limit:a}).then((function(t){console.log(t.data),e.items=t.data.items,e.pagination.total=t.data.total,e.barSearch.alertText="共 ".concat(e.pagination.total," 条记录"),e.loading=!1})).catch((function(t){console.log(t),e.loading=!1})))},handleRest:function(){this.formSearch={user:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",state:""}},handleExpand:function(){this.barSearch.expandInputs=!this.barSearch.expandInputs,this.barSearch.expandBtnText=this.barSearch.expandInputs?"收起▲":"展开▼"},handleSearch:function(){this.doQuery()},handleSelectionChange:function(e){this.multipleSelection=e,console.log(e,this.multipleSelection)},handleSizeChange:function(e){this.doQuery(1,e)},handleCurrentChange:function(e){this.doQuery(e,this.pagination.pageSize)},handleClose:function(){var e=this;this.$confirm("确认关闭？").then((function(t){console.log(t),e.dialogVisible=!1})).catch((function(e){console.log(e)}))},handleNew:function(){var e=this;this.formData={title:"",author:"",type:""},this.dialogVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},handleEdit:function(e){var t=this;this.formData=u({},e),this.dialogVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleSave:function(e){var t=this;e?this.$refs["dataForm"].validate((function(e){if(!e)return!1;t.dialogVisible=!1,t.$message({message:"保存成功",type:"success"})})):this.dialogVisible=!1},handleDelete:function(e){var t=this;this.$confirm("确认删除？").then((function(e){t.$message({message:"删除成功",type:"success"}),console.log(e)})).catch((function(e){console.log(e)}))}},created:function(){this.barSearch.expandInputs=!1,this.barSearch.expandBtnText="展开▼",this.doQuery()}},d=p,h=(a("c379"),a("2877")),m=Object(h["a"])(d,r,l,!1,null,"2ef4945b",null);t["default"]=m.exports},bf56:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("b775"),l=function(e){return Object(r["a"])("/table/list","get",e)}},c379:function(e,t,a){"use strict";var r=a("6c41"),l=a.n(r);l.a}}]);
//# sourceMappingURL=chunk-a312d2e8.a0af0546.js.map